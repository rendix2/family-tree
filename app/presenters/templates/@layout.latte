<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">

	<title>{ifset title}{include title|stripHtml}{/ifset}</title>

	<link rel="stylesheet" type="text/css" href="{$basePath}/css/bootstrap-reboot.min.css">
	<link rel="stylesheet" type="text/css" href="{$basePath}/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="{$basePath}/css/jquery-ui.min.css">

	{* font awesome *}
	<link rel="stylesheet" type="text/css" href="{$basePath}/css/fontawesome.min.css">
	<link rel="stylesheet" type="text/css" href="{$basePath}/css/solid.min.css">
	{* font awesome *}

	<link media="screen" rel="stylesheet" type="text/css" href="{$basePath}/css/primitives.latest.css">
</head>

<body>

{snippet modal}
	{if $presenter->isAjax()}
		{if isset($modalName) && $modalName}
			<div class="modal fade modal-ajax" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
				<div class="modal-dialog" role="document">
					<div class="modal-content">
						<div class="modal-header">
						{block modalHeader}
							{ifset #modal-$modalName-title}
							<h5 class="modal-title">{block|striptags}{include #"modal-$modalName-title"}{/block}</h5>
							{else}
								{_modal_not_set}
							{/ifset}
						{/block}
							<button type="button" class="close" data-dismiss="modal" aria-label="Close">
								<span aria-hidden="true">&times;</span>
							</button>
						</div>
						<div class="modal-body">
						    {ifset #modal-$modalName-body}
						        {include #"modal-$modalName-body"}
							{else}
								{_modal_not_set}
                            {/ifset}
						</div>
						{ifset #modalFooter}
						<div class="modal-footer">
							{include #modalFooter}
						</div>
						{/ifset}
					</div>
				</div>
			</div>
		{/if}
	{/if}
{/snippet}

	{* main nav *}
	<nav class="navbar navbar-expand-lg navbar-light bg-light justify-content-between"">
		<ul class="navbar-nav">
			<li class="nav-item {if $this->getParameter('presenter')->name === 'Homepage'}active{/if}" data-toggle="tooltip" data-placement="left" title="{_menu_family_tree}">
				<a class="nav-link" href="{link Homepage:default}">
				    <i class="fas fa-home"></i>
				</a>
			</li>

			<li class="nav-item {if $this->getParameter('presenter')->name === 'Person'}active{/if}" data-toggle="tooltip" data-placement="left" title="{_menu_persons}">
				<a class="nav-link" href="{link Person:default}">
				    <i class="fas fa-user"></i>
				</a>
			</li>

			<li class="nav-item {if $this->getParameter('presenter')->name === 'Wedding'}active{/if}" data-toggle="tooltip" data-placement="left" title="{_menu_wedding}">
				<a class="nav-link" href="{link Wedding:default}" >
				    <i class="fas fa-heartbeat"></i>
				</a>
			</li>

			<li class="nav-item {if $this->getParameter('presenter')->name === 'Relation'}active{/if}" data-toggle="tooltip" data-placement="left" title="{_menu_relation}">
				<a class="nav-link" href="{link Relation:default}">
				    <i class="fas fa-heart"></i>
				</a>
			</li>

			<li class="nav-item {if $this->getParameter('presenter')->name === 'Genus'}active{/if}" data-toggle="tooltip" data-placement="left" title="{_menu_genus}">
				<a class="nav-link" href="{link Genus:default}">
				    <i class="fas fa-users"></i>
				</a>
			</li>

            <li class="nav-item dropdown {if $this->getParameter('presenter')->name === 'Address'}active{/if}" data-toggle="tooltip" data-placement="left" title="{_menu_address}">
                <a class="nav-link dropdown-toggle" href="{link Address:default}" id="addressDropDownLink" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <i class="fas fa-building"></i>
                </a>

                <div class="dropdown-menu" aria-labelledby="addressDropDownLink">
                    <a class="dropdown-item" href="{link Country:default}">
                        <i class="fas fa-globe"></i> {_menu_country}
                    </a>
                    <a class="dropdown-item" href="{link Town:default}">
                        <i class="fas fa-city"></i> {_menu_town}
                    </a>
                    <a class="dropdown-item" href="{link Address:default}">
                        <i class="fas fa-building"></i> {_menu_address}
                    </a>
                </div>
            </li>

			<li class="nav-item {if $this->getParameter('presenter')->name === 'Name'}active{/if}" data-toggle="tooltip" data-placement="left" title="{_menu_name}">
				<a class="nav-link" href="{link Name:default}">
				    <i class="fas fa-signature"></i>
				</a>
			</li>

			<li class="nav-item {if $this->getParameter('presenter')->name === 'Job'}active{/if}" data-toggle="tooltip" data-placement="left" title="{_menu_job}">
				<a class="nav-link" href="{link Job:default}">
				    <i class="fas fa-briefcase"></i>
                </a>
			</li>

            <li class="nav-item {if $this->getParameter('presenter')->name === 'HistoryNote'}active{/if}" data-toggle="tooltip" data-placement="left" title="{_menu_history_notes}">
                <a class="nav-link" href="{link HistoryNote:default}">
                    <i class="fas fa-sticky-note"></i>
                </a>
            </li>

            <li class="nav-item dropdown {if $this->getParameter('presenter')->name === 'Source'}active{/if}" data-toggle="tooltip" data-placement="left" title="{_menu_source}">
                <a class="nav-link dropdown-toggle" href="{link Source:default}" id="sourceDropDownLink" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <i class="fas fa-database"></i>
                </a>

            	<div class="dropdown-menu" aria-labelledby="sourceDropDownLink">
            	    <a class="dropdown-item" href="{link SourceType:default}">{_menu_source_type}</a>
            		<a class="dropdown-item" href="{link Source:default}">{_menu_source}</a>
                </div>
            </li>

            <li class="nav-item {if $this->getParameter('presenter')->name === 'PersonJob'}active{/if}" data-toggle="tooltip" data-placement="left" title="{_menu_person_job}">
                <a class="nav-link" href="{link PersonJob:default}">
                  <i class="fas fa-users"></i> <i class="fas fa-briefcase"></i>
                </a>
            </li>

            <li class="nav-item {if $this->getParameter('presenter')->name === 'PersonAddress'}active{/if}" data-toggle="tooltip" data-placement="left" title="{_menu_person_address}">
                <a class="nav-link" href="{link PersonAddress:default}">
                    <i class="fas fa-users"></i> <i class="fas fa-building"></i>
                </a>
            </li>

			<li class="nav-item dropdown {if $this->getParameter('presenter')->name === 'Missing'}active{/if}" data-toggle="tooltip" data-placement="left" title="{_menu_missing}">
				<a class="nav-link dropdown-toggle" href="{link Missing:default}" id="missingDropDownLink" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
				    <i class="fas fa-times"></i>
				</a>

				<div class="dropdown-menu" aria-labelledby="missingDropDownLink">
					<a class="dropdown-item" href="{link Missing:weddings}">{_menu_missing_weddings}</a>
					<a class="dropdown-item" href="{link Missing:relations}">{_menu_missing_relations}</a>
					<a class="dropdown-item" href="{link Missing:fathers}">{_menu_missing_fathers}</a>
					<a class="dropdown-item" href="{link Missing:mothers}">{_menu_missing_mothers}</a>
					<a class="dropdown-item" href="{link Missing:parents}">{_menu_missing_parents}</a>
					<a class="dropdown-item" href="{link Missing:genuses}">{_menu_missing_genuses}</a>
					<a class="dropdown-item" href="{link Missing:birthTowns}">{_menu_missing_birth_towns}</a>
					<a class="dropdown-item" href="{link Missing:births}">{_menu_missing_births}</a>
					<a class="dropdown-item" href="{link Missing:deathTowns}">{_menu_missing_death_towns}</a>
					<a class="dropdown-item" href="{link Missing:deaths}">{_menu_missing_deaths}</a>
					<a class="dropdown-item" href="{link Missing:dates}">{_menu_missing_dates}</a>
					<a class="dropdown-item" href="{link Missing:gravedTowns}">{_menu_missing_graved_towns}</a>
					<a class="dropdown-item" href="{link Missing:nameWithoutGenus}">{_menu_missing_name_without_genus}</a>
				</div>
			</li>

            <li class="nav-item {if $this->getParameter('presenter')->name === 'Map'}active{/if}" data-toggle="tooltip" data-placement="left" title="{_menu_map}">
                <a class="nav-link" href="{link Map:default}">
                    <i class="fas fa-map"></i>
                </a>
            </li>

			<li class="nav-item {if $this->getParameter('presenter')->name === 'File'}active{/if}" data-toggle="tooltip" data-placement="left" title="{_menu_file}">
				<a class="nav-link" href="{link File:default}">
					<i class="fas fa-file"></i>
				</a>
			</li>
		</ul>

        <span class="my-2 my-lg-0">
            <ul class="navbar-nav">
    		    <li class="nav-item {if $this->getParameter('presenter')->name === 'Settings'}active{/if}" data-toggle="tooltip" data-placement="left" title="{_menu_settings}">
                    <a class="nav-link" href="{link Settings:default}">
                        <i class="fas fa-cog"></i>
                    </a>
                </li>
            </ul>
        </span>
	</nav>
	{* main nav *}

	{* breadcrumb *}
	<nav aria-label="breadcrumb">
		<ol class="breadcrumb">
			<li class="breadcrumb-item">
				<a href="{link Homepage:default}">Home</a>
			</li>

			{ifset #breadcrumb}
				{include breadcrumb}
			{/ifset}
		</ol>
	</nav>
	{* breadcrumb *}

    {* flashes *}
    {snippet flashes}
	    {foreach $flashes as $flash}
		<div class="alert alert-{$flash->type}">{_$flash->message}</div>
	    {/foreach}
	{/snippet}
	{* flashes *}

	<div class="container-fluid">
		{include content}
	</div>

{*
	<div class="d-flex justify-content-center">
		<div class="spinner-border" role="status">
			<span class="sr-only">Loading...</span>
		</div>
	</div>
*}

	{block scripts}
	    {* jquery *}
		<script src="{$basePath}/js/jquery-3.5.1.js"></script>
		<script src="{$basePath}/js/jquery-ui.js"></script>
        {* jquery *}

        {* Popper *}
        <script src="{$basePath}/js/popper.min.js"></script>
        {* Popper *}

		<script src="{$basePath}/js/bootstrap.min.js"></script>
		<script src="{$basePath}/js/Naja.js"></script>
		<script src="{$basePath}/js/nette.forms.js"></script>
		<script src="{$basePath}/js/tinyMCE.js"></script>

		{* family tree chart *}
		<script src="{$basePath}/js/primitives.latest.js"></script>
		<script src="{$basePath}/js/primitives.jquery.latest.js"></script>
		{* family tree chart *}

		{* font awesome *}
		<script src="{$basePath}/js/fontawesome.min.js"></script>
		<script src="{$basePath}/js/solid.min.js"></script>
		{* font awesome *}

		<script src="{$basePath}/js/main.js"></script>

        {define jsFormCallback}
            <script>
            $('#' + {$control[$form][$input]->htmlId}).on('change', function () {
                var url = $(this).data('link');
                var formId = '#' + {$control[$form]->getElementPrototype()->id};
                var form = document.querySelector(formId);
                var formData = $(form).serializeArray();
                var formData = getFormData(formData);
                var formCheckboxes = getFormCheckboxesData(formId);

                formData = Object.assign(formCheckboxes, formData);
                formData = JSON.stringify(formData);

				var data = { {$input}: $(this).val(), 'formData': formData };

                naja.makeRequest('post', url, data, { dataType: 'json' });
            });
            </script>
        {/define}

        {* some js of current page *}
        {ifset js}
            {snippet js}
                {include js}
            {/snippet}
        {/ifset}
        {* some js of current page *}
	{/block}
</body>
</html>
